<html>
<head>
  <title>Evernote Export</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/606746 (zh-CN, DDL); Windows/10.0.0 (Win64); EDAMVersion=V2;"/>
  <meta name="content-class" content="yinxiang.markdown"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="694"/>

<div><span><div style="font-size: 14px; margin: 0; padding: 0; width: 100%;"><h1 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 41px; border-bottom: 3px double #999; color: #000; margin-top: 14px;">案例实现</h1>
<h2 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 34px; border-bottom: 1px solid #dbdbdb; color: #333;">1. 案例分析</h2>
<h3 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 27px; color: #333;">1.1 分析需求</h3>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">三个工程</p>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">eureka-server</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">auth-service，负责授权，授权需要用户提供客户端的clientId和password，以及授权用户的username和password</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">user-service</li>
</ul>
<h3 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 27px; color: #333;">1.2 流程演示</h3>
<ol style="line-height: 160%; box-sizing: content-box; display: block; padding-left: 30px; margin: 6px 0 10px; color: #333; list-style-type: decimal;">
<li style="line-height: 160%; box-sizing: content-box;">客户端向资源服务器请求登录，携带username+password</li>
<li style="line-height: 160%; box-sizing: content-box;">资源服务器请求认证服务器，携带client+username+password，获取Token</li>
<li style="line-height: 160%; box-sizing: content-box;">认证服务器确定用户信息无误，返回给认证服务器对应的token</li>
<li style="line-height: 160%; box-sizing: content-box;">认证服务器将获取到的用户信息和JWTToken返回给客户端浏览器</li>
</ol>
<h2 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 34px; border-bottom: 1px solid #dbdbdb; color: #333;">2. 实际操作</h2>
<h3 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 27px; color: #333;">2.1 编写主Maven工程</h3>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">需要进行依赖版本管理的有<code style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; color: #c1788b; padding: 4px 4px 2px 0; letter-spacing: -.3px;">spring-cloud</code>、<code style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; color: #c1788b; padding: 4px 4px 2px 0; letter-spacing: -.3px;">spring-security-jwt</code>、<code style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; color: #c1788b; padding: 4px 4px 2px 0; letter-spacing: -.3px;">spring-security-oauth2</code></p>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;"><span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">project</span> <span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">xmlns</span>=<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;http://maven.apache.org/POM/4.0.0&quot;</span>
        <span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">xmlns:xsi</span>=<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
        <span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">xsi:schemaLocation</span>=<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span>
   <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">modelVersion</span>&gt;</span>4.0.0<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">modelVersion</span>&gt;</span>
   <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>cn.coderymy<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>
   <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>jwt-demo1<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>
   <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">version</span>&gt;</span>1.0-SNAPSHOT<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">version</span>&gt;</span>
   <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">packaging</span>&gt;</span>pom<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">packaging</span>&gt;</span>
   <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">parent</span>&gt;</span>
       <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>org.springframework.boot<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>
       <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>spring-boot-starter-parent<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>
       <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">version</span>&gt;</span>2.1.9.RELEASE<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">version</span>&gt;</span>
       <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">relativePath</span>/&gt;</span> <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">&lt;!-- lookup parent from repository --&gt;</span>
   <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">parent</span>&gt;</span>
   <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">properties</span>&gt;</span>
       <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">java.version</span>&gt;</span>1.8<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">java.version</span>&gt;</span>
       <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">spring-cloud.version</span>&gt;</span>Greenwich.SR3<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">spring-cloud.version</span>&gt;</span>
   <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">properties</span>&gt;</span>
   <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependencies</span>&gt;</span>
       <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependency</span>&gt;</span>
           <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>org.springframework.boot<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>
           <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>spring-boot-starter-test<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>
           <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">scope</span>&gt;</span>test<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">scope</span>&gt;</span>
       <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependency</span>&gt;</span>
   <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependencies</span>&gt;</span>
   <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependencyManagement</span>&gt;</span>
       <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependencies</span>&gt;</span>
           <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependency</span>&gt;</span>
               <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>org.springframework.cloud<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>
               <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>spring-cloud-dependencies<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>
               <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">version</span>&gt;</span>${spring-cloud.version}<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">version</span>&gt;</span>
           <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependency</span>&gt;</span>
           <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependency</span>&gt;</span>
               <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>org.springframework.security<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>
               <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>spring-security-jwt<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>
               <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">version</span>&gt;</span>1.0.9.RELEASE<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">version</span>&gt;</span>
           <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependency</span>&gt;</span>
           <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependency</span>&gt;</span>
               <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>org.springframework.security.oauth<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>
               <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>spring-security-oauth2<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>
               <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">version</span>&gt;</span>2.3.4.RELEASE<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">version</span>&gt;</span>
           <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependency</span>&gt;</span>
       <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependencies</span>&gt;</span>
   <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependencyManagement</span>&gt;</span>
<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">project</span>&gt;</span>
</code></pre>
<h3 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 27px; color: #333;">2.2 编写Eureka-Server</h3>
<h4 style="line-height: 160%; box-sizing: content-box; font-size: 20px; color: #333;">创建项目，添加依赖</h4>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;"><span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">project</span> <span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">xmlns</span>=<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">xmlns:xsi</span>=<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
         <span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">xsi:schemaLocation</span>=<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span>
    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">modelVersion</span>&gt;</span>4.0.0<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">modelVersion</span>&gt;</span>
    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">parent</span>&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>jwt-demo1<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>cn.coderymy<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">version</span>&gt;</span>1.0-SNAPSHOT<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">version</span>&gt;</span>
    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">parent</span>&gt;</span>
    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>eureka-server<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>
    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">version</span>&gt;</span>0.0.1-SNAPSHOT<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">version</span>&gt;</span>
    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">name</span>&gt;</span>eureka-server<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">name</span>&gt;</span>
    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">description</span>&gt;</span>Demo project for Spring Boot<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">description</span>&gt;</span>

    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">properties</span>&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">java.version</span>&gt;</span>1.8<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">java.version</span>&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">spring-cloud.version</span>&gt;</span>Greenwich.SR3<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">spring-cloud.version</span>&gt;</span>
    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">properties</span>&gt;</span>

    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependencies</span>&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependency</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>org.springframework.cloud<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-server<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependency</span>&gt;</span>
    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependencies</span>&gt;</span>

    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependencyManagement</span>&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependencies</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependency</span>&gt;</span>
                <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>org.springframework.cloud<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>
                <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>spring-cloud-dependencies<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>
                <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">version</span>&gt;</span>${spring-cloud.version}<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">version</span>&gt;</span>
                <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">type</span>&gt;</span>pom<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">type</span>&gt;</span>
                <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">scope</span>&gt;</span>import<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">scope</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependency</span>&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependencies</span>&gt;</span>
    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependencyManagement</span>&gt;</span>

    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">build</span>&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">plugins</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">plugin</span>&gt;</span>
                <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>org.springframework.boot<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>
                <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>spring-boot-maven-plugin<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">plugin</span>&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">plugins</span>&gt;</span>
    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">build</span>&gt;</span>

<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">project</span>&gt;</span>
</code></pre>
<h4 style="line-height: 160%; box-sizing: content-box; font-size: 20px; color: #333;">配置文件</h4>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;">
<span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">server:</span>
<span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">  port:</span> <span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">8761</span>
<span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">eureka:</span>
<span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">  client:</span>
<span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">    register-with-eureka:</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">false</span>
<span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">    fetch-registry:</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">false</span>
<span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">    service-url:</span>
<span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">      defaultZone:</span> <span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">http://localhost:8761/eureka/</span>

</code></pre>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">在启动类上加上<code style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; color: #c1788b; padding: 4px 4px 2px 0; letter-spacing: -.3px;">@EnableEurekaServer</code>注解</p>
<h3 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 27px; color: #333;">2.3 编写Uaa授权服务</h3>
<h4 style="line-height: 160%; box-sizing: content-box; font-size: 20px; color: #333;">创建项目，引入依赖</h4>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;"><span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">project</span> <span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">xmlns</span>=<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">xmlns:xsi</span>=<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
         <span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">xsi:schemaLocation</span>=<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span>
    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">modelVersion</span>&gt;</span>4.0.0<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">modelVersion</span>&gt;</span>
    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">parent</span>&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>jwt-demo1<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>cn.coderymy<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">version</span>&gt;</span>1.0-SNAPSHOT<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">version</span>&gt;</span>
    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">parent</span>&gt;</span>
    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>uaa-service<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>
    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">version</span>&gt;</span>0.0.1-SNAPSHOT<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">version</span>&gt;</span>
    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">name</span>&gt;</span>uaa-service<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">name</span>&gt;</span>
    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">description</span>&gt;</span>Demo project for Spring Boot<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">description</span>&gt;</span>

    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">properties</span>&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">java.version</span>&gt;</span>1.8<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">java.version</span>&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">spring-cloud.version</span>&gt;</span>Greenwich.SR3<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">spring-cloud.version</span>&gt;</span>
    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">properties</span>&gt;</span>
    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependencies</span>&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependency</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>org.springframework.security<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>spring-security-jwt<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependency</span>&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependency</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>org.springframework.security.oauth<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>spring-security-oauth2<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependency</span>&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependency</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>org.springframework.boot<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>spring-boot-starter-data-jpa<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependency</span>&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependency</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>org.springframework.boot<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>spring-boot-starter-web<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependency</span>&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependency</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>org.springframework.cloud<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-client<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependency</span>&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependency</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>mysql<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>mysql-connector-java<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">scope</span>&gt;</span>runtime<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">scope</span>&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependency</span>&gt;</span>
    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependencies</span>&gt;</span>

    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependencyManagement</span>&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependencies</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependency</span>&gt;</span>
                <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>org.springframework.cloud<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>
                <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>spring-cloud-dependencies<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>
                <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">version</span>&gt;</span>${spring-cloud.version}<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">version</span>&gt;</span>
                <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">type</span>&gt;</span>pom<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">type</span>&gt;</span>
                <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">scope</span>&gt;</span>import<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">scope</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependency</span>&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependencies</span>&gt;</span>
    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependencyManagement</span>&gt;</span>

    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">build</span>&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">plugins</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">plugin</span>&gt;</span>
                <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>org.springframework.boot<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>
                <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>spring-boot-maven-plugin<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">plugin</span>&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">plugins</span>&gt;</span>
    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">build</span>&gt;</span>

<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">project</span>&gt;</span>

</code></pre>
<h4 style="line-height: 160%; box-sizing: content-box; font-size: 20px; color: #333;">配置文件</h4>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;"><span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">spring:</span>
<span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">  application:</span>
<span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">    name:</span> <span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">uaa-service</span>
<span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">  datasource:</span>
<span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">    driver-class-name:</span> <span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">com.mysql.jdbc.Driver</span>
<span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">    url:</span>
<span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">    username:</span>
<span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">    password:</span>
<span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">  jpa:</span>
<span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">    hibernate:</span>
<span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">      ddl-auto:</span> <span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">update</span>
<span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">    show-sql:</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">true</span>
<span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">server:</span>
<span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">  port:</span> <span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">9999</span>
<span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">eureka:</span>
<span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">  client:</span>
<span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">    service-url:</span> 
<span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">      defaultZone:</span> <span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">http://localhost:8761/eureka/</span>

</code></pre>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">配置资源访问</p>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">package</span> cn.coderymy.config;
<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">@Configuration</span>
<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">@EnableWebSecurity</span><span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">//开启Web资源保护的功能，</span>
<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">public</span> <span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">class</span> <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">WebSecurityConfig</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">extends</span> <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">WebSecurityConfigurerAdapter</span> </span>{
    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">@Bean</span>
    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">@Override</span>
    <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">public</span> AuthenticationManager <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">authenticationManagerBean</span><span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">()</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">throws</span> Exception </span>{
        <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">return</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">super</span>.authenticationManagerBean();
    }
    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">@Override</span>
    <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">protected</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">void</span> <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">configure</span><span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">(HttpSecurity http)</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">throws</span> Exception </span>{
        <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">/*
        * 配置所有的请求都需要验证，如果请求验证失败，就到401界面
        * */</span>
        
        
        http.csrf().disable()
                .exceptionHandling()
                .authenticationEntryPoint((request,response,authException)-&gt;response.
                        sendError(HttpServletResponse.SC_UNAUTHORIZED))
                .and()
                .authorizeRequests().antMatchers(<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;/**&quot;</span>).authenticated()
                .and()
                .httpBasic();
    }
    
    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">@Autowired</span>
    UserServiceDetail userServiceDetail;
    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">@Override</span>
    <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">protected</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">void</span> <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">configure</span><span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">(AuthenticationManagerBuilder auth)</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">throws</span> Exception </span>{
        <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">/*
        * 配置用户的用户信息源，以及密码策略
        * */</span>
        auth.userDetailsService(userServiceDetail)
                .passwordEncoder(<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">new</span> BCryptPasswordEncoder());
    }
}

</code></pre>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">配置Authorization Server</p>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">package</span> cn.coderymy.config;

<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">import</span> jdk.nashorn.internal.parser.TokenStream;
<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">import</span> org.springframework.beans.factory.annotation.Autowired;
<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">import</span> org.springframework.beans.factory.annotation.Qualifier;
<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">import</span> org.springframework.context.annotation.Bean;
<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">import</span> org.springframework.context.annotation.Configuration;
<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">import</span> org.springframework.core.io.ClassPathResource;
<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">import</span> org.springframework.security.authentication.AuthenticationManager;
<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">import</span> org.springframework.security.crypto.password.NoOpPasswordEncoder;
<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">import</span> org.springframework.security.oauth2.config.annotation.configurers.ClientDetailsServiceConfigurer;
<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">import</span> org.springframework.security.oauth2.config.annotation.web.configuration.AuthorizationServerConfigurerAdapter;
<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">import</span> org.springframework.security.oauth2.config.annotation.web.configuration.EnableAuthorizationServer;
<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">import</span> org.springframework.security.oauth2.config.annotation.web.configurers.AuthorizationServerEndpointsConfigurer;
<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">import</span> org.springframework.security.oauth2.config.annotation.web.configurers.AuthorizationServerSecurityConfigurer;
<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">import</span> org.springframework.security.oauth2.provider.token.TokenStore;
<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">import</span> org.springframework.security.oauth2.provider.token.store.JwtAccessTokenConverter;
<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">import</span> org.springframework.security.oauth2.provider.token.store.JwtTokenStore;
<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">import</span> org.springframework.security.oauth2.provider.token.store.KeyStoreKeyFactory;

<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">@Configuration</span>
<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">@EnableAuthorizationServer</span><span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">//表示开启Authorization Server功能</span>
<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">public</span> <span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">class</span> <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">OAuth2Config</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">extends</span> <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">AuthorizationServerConfigurerAdapter</span> </span>{
    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">@Override</span>
    <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">public</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">void</span> <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">configure</span><span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">(ClientDetailsServiceConfigurer clients)</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">throws</span> Exception </span>{
        <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">/*
         * 配置了客户端的一些信息，和之前的创建一致
         * */</span>
        clients.inMemory()<span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">//放在内存中进行存储</span>
                .withClient(<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;user-service&quot;</span>)<span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">//创建客户端id为user-service</span>
                .secret(<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;123456&quot;</span>)
                .scopes(<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;service&quot;</span>)<span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">//配置客户端域为“service”</span>
                .authorizedGrantTypes(<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;refresh_token&quot;</span>, <span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;password&quot;</span>)<span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">//配置类验证类型为refresh_token</span>
                .accessTokenValiditySeconds(<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">3600</span>);<span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">//配置Token的过期时间为3600秒</span>
    }

    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">@Override</span>
    <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">public</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">void</span> <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">configure</span><span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">(AuthorizationServerEndpointsConfigurer endpoints)</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">throws</span> Exception </span>{
        <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">/*
        * 配置了
        * 1. tokenStore，使用了JwtTokenStore
        * 2. authenticationManager
        * */</span>
        endpoints.tokenStore(tokenStore()).
                tokenEnhancer(jwtTokenEnhancer()).
                authenticationManager(authenticationManager);
    }

    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">@Override</span>
    <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">public</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">void</span> <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">configure</span><span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">(AuthorizationServerSecurityConfigurer oauthServer)</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">throws</span> Exception </span>{
        <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">/*
        * 这里是配置Token获取的安全策略
        * 获取Token的接口对外暴露，不验证
        * 其它接口需要验证安全
        * */</span>
        oauthServer.tokenKeyAccess(<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;permitAll()&quot;</span>)
                .checkTokenAccess(<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;isAuthenticated()&quot;</span>)
                .allowFormAuthenticationForClients()
                .passwordEncoder(NoOpPasswordEncoder.getInstance());
    }


    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">@Autowired</span>
    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">@Qualifier</span>(<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;authenticationManagerBean&quot;</span>)
    <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">private</span> AuthenticationManager authenticationManager;

    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">@Bean</span>
    <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">public</span> TokenStore <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">tokenStore</span><span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">()</span> </span>{
        <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">return</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">new</span> JwtTokenStore(jwtTokenEnhancer());
    }

    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">@Bean</span>
    <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">protected</span> JwtAccessTokenConverter <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">jwtTokenEnhancer</span><span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">()</span> </span>{
        <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">/*
        * 该对象用于对Token的转换，使用RSA非对称加密算法
        * */</span>
        <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">/*
        * 需要使用jks文件作为Token的加密的秘钥
        * */</span>
        KeyStoreKeyFactory keyStoreKeyFactory = <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">new</span> KeyStoreKeyFactory(<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">new</span> ClassPathResource(<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;fzp-jwt.jks&quot;</span>)
                , <span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;fzp123&quot;</span>.toCharArray());
        JwtAccessTokenConverter converter = <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">new</span> JwtAccessTokenConverter();
        converter.setKeyPair(keyStoreKeyFactory.getKeyPair(<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;fzp-jwt&quot;</span>));
        <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">return</span> converter;
    }
}

</code></pre>
<h4 style="line-height: 160%; box-sizing: content-box; font-size: 20px; color: #333;">生成jks文件</h4>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">在配置中需要jks文件作为Token的加密的密钥</p>
<ol style="line-height: 160%; box-sizing: content-box; display: block; padding-left: 30px; margin: 6px 0 10px; color: #333; list-style-type: decimal;">
<li style="line-height: 160%; box-sizing: content-box;">确保安装了jdk</li>
<li style="line-height: 160%; box-sizing: content-box;">打开终端，输入如下</li>
</ol>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;">keytool -genkeypair -alias ymy-jwt -validity 3650 -keyalg RSA -dname &quot;CN=jwt,OU=jtw,O=jtw,L=zurich,S=zurich,C=CH&quot; -keypass ymy123 -keystore ymy-jwt.jks -storepass ymy123
</code></pre>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">会出现报错，说使用如下语句进行<code style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; color: #c1788b; padding: 4px 4px 2px 0; letter-spacing: -.3px;">keytool -importkeystore -srckeystore ymy-jwt.jks -destkeystore ymy-jwt.jks -deststoretype pkcs12</code><br/>
然后要求输入源秘钥库口令，也就是对应的密码，这里是ymy123<br/>
3. <code style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; color: #c1788b; padding: 4px 4px 2px 0; letter-spacing: -.3px;">keytool -list -rfc --keystore ymy-jwt.jks | openssl x509 -inform pem -pubkey</code><br/>
这里可能会出现找不到openssl命令，关于下载并配置openssl，请见底部<br/>
<img src="案例实现_files/Image.png" type="image/png" data-filename="Image.png"/></p>
<ol start="4" style="line-height: 160%; box-sizing: content-box; display: block; padding-left: 30px; margin: 6px 0 10px; color: #333; list-style-type: decimal;">
<li style="line-height: 160%; box-sizing: content-box;">将生成的公钥信息复制，新建一个<code style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; color: #c1788b; padding: 4px 4px 2px 0; letter-spacing: -.3px;">public.cert</code>文件，复制并保存</li>
</ol>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">&lt;br/&gt;<br/>
&lt;br/&gt;</p>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">将文件复制到Resource目录下，maven编译的时候，可能会将jks文件编译，从而产生乱码，所以需要在pom中添加如下依赖信息</p>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;">
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">plugin</span>&gt;</span>
                <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>org.apache.maven.plugins<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>
                <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>maven-resources-plugin<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>
                <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">configuration</span>&gt;</span>
                    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">nonFilteredFileExtensions</span>&gt;</span>
                        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">nonFilteredFileExtension</span>&gt;</span>cert<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">nonFilteredFileExtension</span>&gt;</span>
                        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">nonFilteredFileExtension</span>&gt;</span>jks<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">nonFilteredFileExtension</span>&gt;</span>
                    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">nonFilteredFileExtensions</span>&gt;</span>
                <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">configuration</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">plugin</span>&gt;</span>
</code></pre>
<h3 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 27px; color: #333;">2.4 编写user-service资源服务</h3>
<h4 style="line-height: 160%; box-sizing: content-box; font-size: 20px; color: #333;">创建项目，添加依赖</h4>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;"><span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">project</span> <span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">xmlns</span>=<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">xmlns:xsi</span>=<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
         <span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">xsi:schemaLocation</span>=<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span>
    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">modelVersion</span>&gt;</span>4.0.0<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">modelVersion</span>&gt;</span>
    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">parent</span>&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>jwt-demo1<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>cn.coderymy<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">version</span>&gt;</span>1.0-SNAPSHOT<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">version</span>&gt;</span>
    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">parent</span>&gt;</span>
    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>user-service<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>
    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">version</span>&gt;</span>0.0.1-SNAPSHOT<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">version</span>&gt;</span>
    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">name</span>&gt;</span>user-service<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">name</span>&gt;</span>
    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">description</span>&gt;</span>Demo project for Spring Boot<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">description</span>&gt;</span>

    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">properties</span>&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">java.version</span>&gt;</span>1.8<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">java.version</span>&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">spring-cloud.version</span>&gt;</span>Greenwich.SR3<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">spring-cloud.version</span>&gt;</span>
    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">properties</span>&gt;</span>

    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependencies</span>&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependency</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>org.springframework.boot<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>spring-boot-starter-web<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependency</span>&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependency</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>org.springframework.cloud<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-client<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependency</span>&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependency</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>org.springframework.cloud<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>spring-cloud-starter-netflix-hystrix<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependency</span>&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependency</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>org.springframework.cloud<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>spring-cloud-starter-openfeign<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependency</span>&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependency</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>org.springframework.security<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>spring-security-jwt<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependency</span>&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependency</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>org.springframework.security.oauth<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>spring-security-oauth2<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependency</span>&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependency</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>org.springframework.boot<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>spring-boot-starter-data-jpa<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependency</span>&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependency</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>mysql<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>mysql-connector-java<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependency</span>&gt;</span>
    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependencies</span>&gt;</span>

    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependencyManagement</span>&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependencies</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependency</span>&gt;</span>
                <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>org.springframework.cloud<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>
                <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>spring-cloud-dependencies<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>
                <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">version</span>&gt;</span>${spring-cloud.version}<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">version</span>&gt;</span>
                <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">type</span>&gt;</span>pom<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">type</span>&gt;</span>
                <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">scope</span>&gt;</span>import<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">scope</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependency</span>&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependencies</span>&gt;</span>
    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependencyManagement</span>&gt;</span>

    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">build</span>&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">plugins</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">plugin</span>&gt;</span>
                <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>org.springframework.boot<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>
                <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>spring-boot-maven-plugin<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">plugin</span>&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">plugins</span>&gt;</span>
    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">build</span>&gt;</span>

<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">project</span>&gt;</span>


</code></pre>
<h4 style="line-height: 160%; box-sizing: content-box; font-size: 20px; color: #333;">配置文件</h4>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;"><span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">server:</span>
<span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">  port:</span> <span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">9090</span>
<span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">eureka:</span>
<span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">  client:</span>
<span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">    service-url:</span> 
<span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">      defaultZone:</span> <span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">http://localhost:8761/eureka/</span>

<span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">spring:</span>
<span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">  application:</span>
<span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">    name:</span> <span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">user-service</span>
<span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">  datasource:</span>
<span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">    driver-class-name:</span> <span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">com.mysql.jdbc.Driver</span>
<span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">    url:</span>
<span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">    username:</span>
<span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">    password:</span> 
<span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">  jpa:</span>
<span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">    hibernate:</span>
<span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">      ddl-auto:</span> <span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">update</span>
<span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">    show-sql:</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">true</span>
<span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">feign:</span>
<span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">  hystrix:</span>
<span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">    enabled:</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">true</span>

</code></pre>
<h4 style="line-height: 160%; box-sizing: content-box; font-size: 20px; color: #333;">配置Resource Server</h4>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">需要将cert文件放到resources下</p>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;"><span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">@Configuration</span>
<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">public</span> <span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">class</span> <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">JwtConfig</span> </span>{
    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">@Autowired</span>
    JwtAccessTokenConverter jwtAccessTokenConverter;


    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">@Bean</span>
    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">@Qualifier</span>(<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;tokenStore&quot;</span>)
    <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">public</span> TokenStore <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">tokenStore</span><span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">()</span></span>{
        <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">return</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">new</span> JwtTokenStore(jwtAccessTokenConverter);
    }
    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">@Bean</span>
    <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">protected</span> JwtAccessTokenConverter <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">jwtTokenConverter</span><span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">()</span></span>{
        JwtAccessTokenConverter converter=<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">new</span> JwtAccessTokenConverter();
        ClassPathResource resource=<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">new</span> ClassPathResource(<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;public.cert&quot;</span>);
        String publicKey;
        <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">try</span>{
            publicKey=<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">new</span> String(FileCopyUtils.copyToByteArray(resource.getInputStream()));
        } <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">catch</span> (IOException e) {
            <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">throw</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">new</span> RuntimeException();
        }
        converter.setVerifierKey(publicKey);
        <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">return</span> converter;
    }
}
</code></pre>
<h4 style="line-height: 160%; box-sizing: content-box; font-size: 20px; color: #333;">配置ResourceServerConfig</h4>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;"><span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">@Configuration</span>
<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">@EnableResourceServer</span>
<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">public</span> <span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">class</span> <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">ResourceServerConfig</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">extends</span> <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">ResourceServerConfigurerAdapter</span> </span>{
    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">@Autowired</span>
    TokenStore tokenStore;

    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">@Override</span>
    <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">public</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">void</span> <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">configure</span><span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">(HttpSecurity http)</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">throws</span> Exception </span>{
        http.csrf().disable()
                .authorizeRequests()
                .antMatchers(<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;/suer/login&quot;</span>,<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;/user/register&quot;</span>).permitAll()
                .antMatchers(<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;/**&quot;</span>).authenticated();
    }

    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">@Override</span>
    <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">public</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">void</span> <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">configure</span><span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">(ResourceServerSecurityConfigurer resources)</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">throws</span> Exception </span>{
        resources.tokenStore(tokenStore);
    }
}
</code></pre>
<h4 style="line-height: 160%; box-sizing: content-box; font-size: 20px; color: #333;">配置开启方法的安全验证</h4>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;"><span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">@Configuration</span>
<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">@EnableGlobalMethodSecurity</span>(prePostEnabled = <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">true</span>)
<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">public</span> <span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">class</span> <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">GlobalMethodSecurityConfig</span> </span>{
}
</code></pre>
<h4 style="line-height: 160%; box-sizing: content-box; font-size: 20px; color: #333;">编写用户注册接口</h4>
<ol style="line-height: 160%; box-sizing: content-box; display: block; padding-left: 30px; margin: 6px 0 10px; color: #333; list-style-type: decimal;">
<li style="line-height: 160%; box-sizing: content-box;">用到user和role两个实体类，userdao继承jpaRepository类+</li>
</ol>
<h1 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 41px; border-bottom: 3px double #999; color: #000;">下载配置openssl</h1>
<ol style="line-height: 160%; box-sizing: content-box; display: block; padding-left: 30px; margin: 6px 0 10px; color: #333; list-style-type: decimal;">
<li style="line-height: 160%; box-sizing: content-box;">下载<a href="http://slproweb.com/products/Win32OpenSSL.html" style="line-height: 160%; box-sizing: content-box; text-decoration: underline; color: #5286bc;">openssl下载地址</a></li>
<li style="line-height: 160%; box-sizing: content-box;">配置，安装完成之后，将对应的安装路径的bin配置在环境变量的path中即可</li>
<li style="line-height: 160%; box-sizing: content-box;">验证是否配置成功，在命令行中直接输入openssl</li>
</ol>
</div><center style="display:none !important;visibility:collapse !important;height:0 !important;white-space:nowrap;width:100%;overflow:hidden">%23%20%E6%A1%88%E4%BE%8B%E5%AE%9E%E7%8E%B0%0A%0A%23%23%201.%20%E6%A1%88%E4%BE%8B%E5%88%86%E6%9E%90%0A%23%23%23%201.1%20%E5%88%86%E6%9E%90%E9%9C%80%E6%B1%82%0A%E4%B8%89%E4%B8%AA%E5%B7%A5%E7%A8%8B%0A%2B%20eureka-server%0A%2B%20auth-service%EF%BC%8C%E8%B4%9F%E8%B4%A3%E6%8E%88%E6%9D%83%EF%BC%8C%E6%8E%88%E6%9D%83%E9%9C%80%E8%A6%81%E7%94%A8%E6%88%B7%E6%8F%90%E4%BE%9B%E5%AE%A2%E6%88%B7%E7%AB%AF%E7%9A%84clientId%E5%92%8Cpassword%EF%BC%8C%E4%BB%A5%E5%8F%8A%E6%8E%88%E6%9D%83%E7%94%A8%E6%88%B7%E7%9A%84username%E5%92%8Cpassword%0A%2B%20user-service%0A%20%23%23%23%201.2%20%E6%B5%81%E7%A8%8B%E6%BC%94%E7%A4%BA%0A%20%0A%201.%20%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%90%91%E8%B5%84%E6%BA%90%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%AF%B7%E6%B1%82%E7%99%BB%E5%BD%95%EF%BC%8C%E6%90%BA%E5%B8%A6username%2Bpassword%0A%202.%20%E8%B5%84%E6%BA%90%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%AF%B7%E6%B1%82%E8%AE%A4%E8%AF%81%E6%9C%8D%E5%8A%A1%E5%99%A8%EF%BC%8C%E6%90%BA%E5%B8%A6client%2Busername%2Bpassword%EF%BC%8C%E8%8E%B7%E5%8F%96Token%0A%203.%20%E8%AE%A4%E8%AF%81%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%A1%AE%E5%AE%9A%E7%94%A8%E6%88%B7%E4%BF%A1%E6%81%AF%E6%97%A0%E8%AF%AF%EF%BC%8C%E8%BF%94%E5%9B%9E%E7%BB%99%E8%AE%A4%E8%AF%81%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%AF%B9%E5%BA%94%E7%9A%84token%0A%204.%20%E8%AE%A4%E8%AF%81%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%B0%86%E8%8E%B7%E5%8F%96%E5%88%B0%E7%9A%84%E7%94%A8%E6%88%B7%E4%BF%A1%E6%81%AF%E5%92%8CJWTToken%E8%BF%94%E5%9B%9E%E7%BB%99%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B5%8F%E8%A7%88%E5%99%A8%0A%20%0A%20%23%23%202.%20%E5%AE%9E%E9%99%85%E6%93%8D%E4%BD%9C%0A%20%0A%20%23%23%23%202.1%20%E7%BC%96%E5%86%99%E4%B8%BBMaven%E5%B7%A5%E7%A8%8B%0A%20%E9%9C%80%E8%A6%81%E8%BF%9B%E8%A1%8C%E4%BE%9D%E8%B5%96%E7%89%88%E6%9C%AC%E7%AE%A1%E7%90%86%E7%9A%84%E6%9C%89%60spring-cloud%60%E3%80%81%60spring-security-jwt%60%E3%80%81%60spring-security-oauth2%60%20%0A%20%60%60%60xml%0A%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%3F%3E%0A%3Cproject%20xmlns%3D%22http%3A%2F%2Fmaven.apache.org%2FPOM%2F4.0.0%22%0A%20%20%20%20%20%20%20%20%20xmlns%3Axsi%3D%22http%3A%2F%2Fwww.w3.org%2F2001%2FXMLSchema-instance%22%0A%20%20%20%20%20%20%20%20%20xsi%3AschemaLocation%3D%22http%3A%2F%2Fmaven.apache.org%2FPOM%2F4.0.0%20http%3A%2F%2Fmaven.apache.org%2Fxsd%2Fmaven-4.0.0.xsd%22%3E%0A%20%20%20%20%3CmodelVersion%3E4.0.0%3C%2FmodelVersion%3E%0A%20%20%20%20%3CgroupId%3Ecn.coderymy%3C%2FgroupId%3E%0A%20%20%20%20%3CartifactId%3Ejwt-demo1%3C%2FartifactId%3E%0A%20%20%20%20%3Cversion%3E1.0-SNAPSHOT%3C%2Fversion%3E%0A%20%20%20%20%3Cpackaging%3Epom%3C%2Fpackaging%3E%0A%20%20%20%20%3Cparent%3E%0A%20%20%20%20%20%20%20%20%3CgroupId%3Eorg.springframework.boot%3C%2FgroupId%3E%0A%20%20%20%20%20%20%20%20%3CartifactId%3Espring-boot-starter-parent%3C%2FartifactId%3E%0A%20%20%20%20%20%20%20%20%3Cversion%3E2.1.9.RELEASE%3C%2Fversion%3E%0A%20%20%20%20%20%20%20%20%3CrelativePath%2F%3E%20%3C!--%20lookup%20parent%20from%20repository%20--%3E%0A%20%20%20%20%3C%2Fparent%3E%0A%20%20%20%20%3Cproperties%3E%0A%20%20%20%20%20%20%20%20%3Cjava.version%3E1.8%3C%2Fjava.version%3E%0A%20%20%20%20%20%20%20%20%3Cspring-cloud.version%3EGreenwich.SR3%3C%2Fspring-cloud.version%3E%0A%20%20%20%20%3C%2Fproperties%3E%0A%20%20%20%20%3Cdependencies%3E%0A%20%20%20%20%20%20%20%20%3Cdependency%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3CgroupId%3Eorg.springframework.boot%3C%2FgroupId%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3CartifactId%3Espring-boot-starter-test%3C%2FartifactId%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cscope%3Etest%3C%2Fscope%3E%0A%20%20%20%20%20%20%20%20%3C%2Fdependency%3E%0A%20%20%20%20%3C%2Fdependencies%3E%0A%20%20%20%20%3CdependencyManagement%3E%0A%20%20%20%20%20%20%20%20%3Cdependencies%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdependency%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3CgroupId%3Eorg.springframework.cloud%3C%2FgroupId%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3CartifactId%3Espring-cloud-dependencies%3C%2FartifactId%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cversion%3E%24%7Bspring-cloud.version%7D%3C%2Fversion%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fdependency%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdependency%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3CgroupId%3Eorg.springframework.security%3C%2FgroupId%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3CartifactId%3Espring-security-jwt%3C%2FartifactId%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cversion%3E1.0.9.RELEASE%3C%2Fversion%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fdependency%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdependency%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3CgroupId%3Eorg.springframework.security.oauth%3C%2FgroupId%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3CartifactId%3Espring-security-oauth2%3C%2FartifactId%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cversion%3E2.3.4.RELEASE%3C%2Fversion%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fdependency%3E%0A%20%20%20%20%20%20%20%20%3C%2Fdependencies%3E%0A%20%20%20%20%3C%2FdependencyManagement%3E%0A%3C%2Fproject%3E%0A%60%60%60%0A%23%23%23%202.2%20%E7%BC%96%E5%86%99Eureka-Server%0A%0A%23%23%23%23%20%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE%EF%BC%8C%E6%B7%BB%E5%8A%A0%E4%BE%9D%E8%B5%96%0A%60%60%60xml%0A%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%3F%3E%0A%3Cproject%20xmlns%3D%22http%3A%2F%2Fmaven.apache.org%2FPOM%2F4.0.0%22%20xmlns%3Axsi%3D%22http%3A%2F%2Fwww.w3.org%2F2001%2FXMLSchema-instance%22%0A%20%20%20%20%20%20%20%20%20xsi%3AschemaLocation%3D%22http%3A%2F%2Fmaven.apache.org%2FPOM%2F4.0.0%20https%3A%2F%2Fmaven.apache.org%2Fxsd%2Fmaven-4.0.0.xsd%22%3E%0A%20%20%20%20%3CmodelVersion%3E4.0.0%3C%2FmodelVersion%3E%0A%20%20%20%20%3Cparent%3E%0A%20%20%20%20%20%20%20%20%3CartifactId%3Ejwt-demo1%3C%2FartifactId%3E%0A%20%20%20%20%20%20%20%20%3CgroupId%3Ecn.coderymy%3C%2FgroupId%3E%0A%20%20%20%20%20%20%20%20%3Cversion%3E1.0-SNAPSHOT%3C%2Fversion%3E%0A%20%20%20%20%3C%2Fparent%3E%0A%20%20%20%20%3CartifactId%3Eeureka-server%3C%2FartifactId%3E%0A%20%20%20%20%3Cversion%3E0.0.1-SNAPSHOT%3C%2Fversion%3E%0A%20%20%20%20%3Cname%3Eeureka-server%3C%2Fname%3E%0A%20%20%20%20%3Cdescription%3EDemo%20project%20for%20Spring%20Boot%3C%2Fdescription%3E%0A%0A%20%20%20%20%3Cproperties%3E%0A%20%20%20%20%20%20%20%20%3Cjava.version%3E1.8%3C%2Fjava.version%3E%0A%20%20%20%20%20%20%20%20%3Cspring-cloud.version%3EGreenwich.SR3%3C%2Fspring-cloud.version%3E%0A%20%20%20%20%3C%2Fproperties%3E%0A%0A%20%20%20%20%3Cdependencies%3E%0A%20%20%20%20%20%20%20%20%3Cdependency%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3CgroupId%3Eorg.springframework.cloud%3C%2FgroupId%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3CartifactId%3Espring-cloud-starter-netflix-eureka-server%3C%2FartifactId%3E%0A%20%20%20%20%20%20%20%20%3C%2Fdependency%3E%0A%20%20%20%20%3C%2Fdependencies%3E%0A%0A%20%20%20%20%3CdependencyManagement%3E%0A%20%20%20%20%20%20%20%20%3Cdependencies%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdependency%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3CgroupId%3Eorg.springframework.cloud%3C%2FgroupId%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3CartifactId%3Espring-cloud-dependencies%3C%2FartifactId%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cversion%3E%24%7Bspring-cloud.version%7D%3C%2Fversion%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Ctype%3Epom%3C%2Ftype%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cscope%3Eimport%3C%2Fscope%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fdependency%3E%0A%20%20%20%20%20%20%20%20%3C%2Fdependencies%3E%0A%20%20%20%20%3C%2FdependencyManagement%3E%0A%0A%20%20%20%20%3Cbuild%3E%0A%20%20%20%20%20%20%20%20%3Cplugins%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cplugin%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3CgroupId%3Eorg.springframework.boot%3C%2FgroupId%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3CartifactId%3Espring-boot-maven-plugin%3C%2FartifactId%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fplugin%3E%0A%20%20%20%20%20%20%20%20%3C%2Fplugins%3E%0A%20%20%20%20%3C%2Fbuild%3E%0A%0A%3C%2Fproject%3E%0A%60%60%60%0A%23%23%23%23%20%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%0A%60%60%60yaml%0A%0Aserver%3A%0A%20%20port%3A%208761%0Aeureka%3A%0A%20%20client%3A%0A%20%20%20%20register-with-eureka%3A%20false%0A%20%20%20%20fetch-registry%3A%20false%0A%20%20%20%20service-url%3A%0A%20%20%20%20%20%20defaultZone%3A%20http%3A%2F%2Flocalhost%3A8761%2Feureka%2F%0A%0A%60%60%60%0A%E5%9C%A8%E5%90%AF%E5%8A%A8%E7%B1%BB%E4%B8%8A%E5%8A%A0%E4%B8%8A%60%40EnableEurekaServer%60%E6%B3%A8%E8%A7%A3%0A%0A%23%23%23%202.3%20%E7%BC%96%E5%86%99Uaa%E6%8E%88%E6%9D%83%E6%9C%8D%E5%8A%A1%0A%0A%23%23%23%23%20%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE%EF%BC%8C%E5%BC%95%E5%85%A5%E4%BE%9D%E8%B5%96%0A%0A%60%60%60xml%0A%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%3F%3E%0A%3Cproject%20xmlns%3D%22http%3A%2F%2Fmaven.apache.org%2FPOM%2F4.0.0%22%20xmlns%3Axsi%3D%22http%3A%2F%2Fwww.w3.org%2F2001%2FXMLSchema-instance%22%0A%20%20%20%20%20%20%20%20%20xsi%3AschemaLocation%3D%22http%3A%2F%2Fmaven.apache.org%2FPOM%2F4.0.0%20https%3A%2F%2Fmaven.apache.org%2Fxsd%2Fmaven-4.0.0.xsd%22%3E%0A%20%20%20%20%3CmodelVersion%3E4.0.0%3C%2FmodelVersion%3E%0A%20%20%20%20%3Cparent%3E%0A%20%20%20%20%20%20%20%20%3CartifactId%3Ejwt-demo1%3C%2FartifactId%3E%0A%20%20%20%20%20%20%20%20%3CgroupId%3Ecn.coderymy%3C%2FgroupId%3E%0A%20%20%20%20%20%20%20%20%3Cversion%3E1.0-SNAPSHOT%3C%2Fversion%3E%0A%20%20%20%20%3C%2Fparent%3E%0A%20%20%20%20%3CartifactId%3Euaa-service%3C%2FartifactId%3E%0A%20%20%20%20%3Cversion%3E0.0.1-SNAPSHOT%3C%2Fversion%3E%0A%20%20%20%20%3Cname%3Euaa-service%3C%2Fname%3E%0A%20%20%20%20%3Cdescription%3EDemo%20project%20for%20Spring%20Boot%3C%2Fdescription%3E%0A%0A%20%20%20%20%3Cproperties%3E%0A%20%20%20%20%20%20%20%20%3Cjava.version%3E1.8%3C%2Fjava.version%3E%0A%20%20%20%20%20%20%20%20%3Cspring-cloud.version%3EGreenwich.SR3%3C%2Fspring-cloud.version%3E%0A%20%20%20%20%3C%2Fproperties%3E%0A%20%20%20%20%3Cdependencies%3E%0A%20%20%20%20%20%20%20%20%3Cdependency%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3CgroupId%3Eorg.springframework.security%3C%2FgroupId%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3CartifactId%3Espring-security-jwt%3C%2FartifactId%3E%0A%20%20%20%20%20%20%20%20%3C%2Fdependency%3E%0A%20%20%20%20%20%20%20%20%3Cdependency%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3CgroupId%3Eorg.springframework.security.oauth%3C%2FgroupId%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3CartifactId%3Espring-security-oauth2%3C%2FartifactId%3E%0A%20%20%20%20%20%20%20%20%3C%2Fdependency%3E%0A%20%20%20%20%20%20%20%20%3Cdependency%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3CgroupId%3Eorg.springframework.boot%3C%2FgroupId%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3CartifactId%3Espring-boot-starter-data-jpa%3C%2FartifactId%3E%0A%20%20%20%20%20%20%20%20%3C%2Fdependency%3E%0A%20%20%20%20%20%20%20%20%3Cdependency%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3CgroupId%3Eorg.springframework.boot%3C%2FgroupId%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3CartifactId%3Espring-boot-starter-web%3C%2FartifactId%3E%0A%20%20%20%20%20%20%20%20%3C%2Fdependency%3E%0A%20%20%20%20%20%20%20%20%3Cdependency%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3CgroupId%3Eorg.springframework.cloud%3C%2FgroupId%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3CartifactId%3Espring-cloud-starter-netflix-eureka-client%3C%2FartifactId%3E%0A%20%20%20%20%20%20%20%20%3C%2Fdependency%3E%0A%20%20%20%20%20%20%20%20%3Cdependency%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3CgroupId%3Emysql%3C%2FgroupId%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3CartifactId%3Emysql-connector-java%3C%2FartifactId%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cscope%3Eruntime%3C%2Fscope%3E%0A%20%20%20%20%20%20%20%20%3C%2Fdependency%3E%0A%20%20%20%20%3C%2Fdependencies%3E%0A%0A%20%20%20%20%3CdependencyManagement%3E%0A%20%20%20%20%20%20%20%20%3Cdependencies%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdependency%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3CgroupId%3Eorg.springframework.cloud%3C%2FgroupId%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3CartifactId%3Espring-cloud-dependencies%3C%2FartifactId%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cversion%3E%24%7Bspring-cloud.version%7D%3C%2Fversion%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Ctype%3Epom%3C%2Ftype%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cscope%3Eimport%3C%2Fscope%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fdependency%3E%0A%20%20%20%20%20%20%20%20%3C%2Fdependencies%3E%0A%20%20%20%20%3C%2FdependencyManagement%3E%0A%0A%20%20%20%20%3Cbuild%3E%0A%20%20%20%20%20%20%20%20%3Cplugins%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cplugin%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3CgroupId%3Eorg.springframework.boot%3C%2FgroupId%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3CartifactId%3Espring-boot-maven-plugin%3C%2FartifactId%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fplugin%3E%0A%20%20%20%20%20%20%20%20%3C%2Fplugins%3E%0A%20%20%20%20%3C%2Fbuild%3E%0A%0A%3C%2Fproject%3E%0A%0A%60%60%60%0A%0A%23%23%23%23%20%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%0A%0A%60%60%60yaml%0Aspring%3A%0A%20%20application%3A%0A%20%20%20%20name%3A%20uaa-service%0A%20%20datasource%3A%0A%20%20%20%20driver-class-name%3A%20com.mysql.jdbc.Driver%0A%20%20%20%20url%3A%0A%20%20%20%20username%3A%0A%20%20%20%20password%3A%0A%20%20jpa%3A%0A%20%20%20%20hibernate%3A%0A%20%20%20%20%20%20ddl-auto%3A%20update%0A%20%20%20%20show-sql%3A%20true%0Aserver%3A%0A%20%20port%3A%209999%0Aeureka%3A%0A%20%20client%3A%0A%20%20%20%20service-url%3A%20%0A%20%20%20%20%20%20defaultZone%3A%20http%3A%2F%2Flocalhost%3A8761%2Feureka%2F%0A%0A%60%60%60%0A%E9%85%8D%E7%BD%AE%E8%B5%84%E6%BA%90%E8%AE%BF%E9%97%AE%0A%60%60%60java%0Apackage%20cn.coderymy.config%3B%0A%40Configuration%0A%40EnableWebSecurity%2F%2F%E5%BC%80%E5%90%AFWeb%E8%B5%84%E6%BA%90%E4%BF%9D%E6%8A%A4%E7%9A%84%E5%8A%9F%E8%83%BD%EF%BC%8C%0Apublic%20class%20WebSecurityConfig%20extends%20WebSecurityConfigurerAdapter%20%7B%0A%20%20%20%20%40Bean%0A%20%20%20%20%40Override%0A%20%20%20%20public%20AuthenticationManager%20authenticationManagerBean()%20throws%20Exception%20%7B%0A%20%20%20%20%20%20%20%20return%20super.authenticationManagerBean()%3B%0A%20%20%20%20%7D%0A%20%20%20%20%40Override%0A%20%20%20%20protected%20void%20configure(HttpSecurity%20http)%20throws%20Exception%20%7B%0A%20%20%20%20%20%20%20%20%2F*%0A%20%20%20%20%20%20%20%20*%20%E9%85%8D%E7%BD%AE%E6%89%80%E6%9C%89%E7%9A%84%E8%AF%B7%E6%B1%82%E9%83%BD%E9%9C%80%E8%A6%81%E9%AA%8C%E8%AF%81%EF%BC%8C%E5%A6%82%E6%9E%9C%E8%AF%B7%E6%B1%82%E9%AA%8C%E8%AF%81%E5%A4%B1%E8%B4%A5%EF%BC%8C%E5%B0%B1%E5%88%B0401%E7%95%8C%E9%9D%A2%0A%20%20%20%20%20%20%20%20*%20*%2F%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20http.csrf().disable()%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.exceptionHandling()%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.authenticationEntryPoint((request%2Cresponse%2CauthException)-%3Eresponse.%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20sendError(HttpServletResponse.SC_UNAUTHORIZED))%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.and()%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.authorizeRequests().antMatchers(%22%2F**%22).authenticated()%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.and()%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.httpBasic()%3B%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%40Autowired%0A%20%20%20%20UserServiceDetail%20userServiceDetail%3B%0A%20%20%20%20%40Override%0A%20%20%20%20protected%20void%20configure(AuthenticationManagerBuilder%20auth)%20throws%20Exception%20%7B%0A%20%20%20%20%20%20%20%20%2F*%0A%20%20%20%20%20%20%20%20*%20%E9%85%8D%E7%BD%AE%E7%94%A8%E6%88%B7%E7%9A%84%E7%94%A8%E6%88%B7%E4%BF%A1%E6%81%AF%E6%BA%90%EF%BC%8C%E4%BB%A5%E5%8F%8A%E5%AF%86%E7%A0%81%E7%AD%96%E7%95%A5%0A%20%20%20%20%20%20%20%20*%20*%2F%0A%20%20%20%20%20%20%20%20auth.userDetailsService(userServiceDetail)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.passwordEncoder(new%20BCryptPasswordEncoder())%3B%0A%20%20%20%20%7D%0A%7D%0A%0A%60%60%60%0A%E9%85%8D%E7%BD%AEAuthorization%20Server%0A%0A%60%60%60java%0Apackage%20cn.coderymy.config%3B%0A%0Aimport%20jdk.nashorn.internal.parser.TokenStream%3B%0Aimport%20org.springframework.beans.factory.annotation.Autowired%3B%0Aimport%20org.springframework.beans.factory.annotation.Qualifier%3B%0Aimport%20org.springframework.context.annotation.Bean%3B%0Aimport%20org.springframework.context.annotation.Configuration%3B%0Aimport%20org.springframework.core.io.ClassPathResource%3B%0Aimport%20org.springframework.security.authentication.AuthenticationManager%3B%0Aimport%20org.springframework.security.crypto.password.NoOpPasswordEncoder%3B%0Aimport%20org.springframework.security.oauth2.config.annotation.configurers.ClientDetailsServiceConfigurer%3B%0Aimport%20org.springframework.security.oauth2.config.annotation.web.configuration.AuthorizationServerConfigurerAdapter%3B%0Aimport%20org.springframework.security.oauth2.config.annotation.web.configuration.EnableAuthorizationServer%3B%0Aimport%20org.springframework.security.oauth2.config.annotation.web.configurers.AuthorizationServerEndpointsConfigurer%3B%0Aimport%20org.springframework.security.oauth2.config.annotation.web.configurers.AuthorizationServerSecurityConfigurer%3B%0Aimport%20org.springframework.security.oauth2.provider.token.TokenStore%3B%0Aimport%20org.springframework.security.oauth2.provider.token.store.JwtAccessTokenConverter%3B%0Aimport%20org.springframework.security.oauth2.provider.token.store.JwtTokenStore%3B%0Aimport%20org.springframework.security.oauth2.provider.token.store.KeyStoreKeyFactory%3B%0A%0A%40Configuration%0A%40EnableAuthorizationServer%2F%2F%E8%A1%A8%E7%A4%BA%E5%BC%80%E5%90%AFAuthorization%20Server%E5%8A%9F%E8%83%BD%0Apublic%20class%20OAuth2Config%20extends%20AuthorizationServerConfigurerAdapter%20%7B%0A%20%20%20%20%40Override%0A%20%20%20%20public%20void%20configure(ClientDetailsServiceConfigurer%20clients)%20throws%20Exception%20%7B%0A%20%20%20%20%20%20%20%20%2F*%0A%20%20%20%20%20%20%20%20%20*%20%E9%85%8D%E7%BD%AE%E4%BA%86%E5%AE%A2%E6%88%B7%E7%AB%AF%E7%9A%84%E4%B8%80%E4%BA%9B%E4%BF%A1%E6%81%AF%EF%BC%8C%E5%92%8C%E4%B9%8B%E5%89%8D%E7%9A%84%E5%88%9B%E5%BB%BA%E4%B8%80%E8%87%B4%0A%20%20%20%20%20%20%20%20%20*%20*%2F%0A%20%20%20%20%20%20%20%20clients.inMemory()%2F%2F%E6%94%BE%E5%9C%A8%E5%86%85%E5%AD%98%E4%B8%AD%E8%BF%9B%E8%A1%8C%E5%AD%98%E5%82%A8%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.withClient(%22user-service%22)%2F%2F%E5%88%9B%E5%BB%BA%E5%AE%A2%E6%88%B7%E7%AB%AFid%E4%B8%BAuser-service%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.secret(%22123456%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.scopes(%22service%22)%2F%2F%E9%85%8D%E7%BD%AE%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%9F%9F%E4%B8%BA%E2%80%9Cservice%E2%80%9D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.authorizedGrantTypes(%22refresh_token%22%2C%20%22password%22)%2F%2F%E9%85%8D%E7%BD%AE%E7%B1%BB%E9%AA%8C%E8%AF%81%E7%B1%BB%E5%9E%8B%E4%B8%BArefresh_token%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.accessTokenValiditySeconds(3600)%3B%2F%2F%E9%85%8D%E7%BD%AEToken%E7%9A%84%E8%BF%87%E6%9C%9F%E6%97%B6%E9%97%B4%E4%B8%BA3600%E7%A7%92%0A%20%20%20%20%7D%0A%0A%20%20%20%20%40Override%0A%20%20%20%20public%20void%20configure(AuthorizationServerEndpointsConfigurer%20endpoints)%20throws%20Exception%20%7B%0A%20%20%20%20%20%20%20%20%2F*%0A%20%20%20%20%20%20%20%20*%20%E9%85%8D%E7%BD%AE%E4%BA%86%0A%20%20%20%20%20%20%20%20*%201.%20tokenStore%EF%BC%8C%E4%BD%BF%E7%94%A8%E4%BA%86JwtTokenStore%0A%20%20%20%20%20%20%20%20*%202.%20authenticationManager%0A%20%20%20%20%20%20%20%20*%20*%2F%0A%20%20%20%20%20%20%20%20endpoints.tokenStore(tokenStore()).%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20tokenEnhancer(jwtTokenEnhancer()).%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20authenticationManager(authenticationManager)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%40Override%0A%20%20%20%20public%20void%20configure(AuthorizationServerSecurityConfigurer%20oauthServer)%20throws%20Exception%20%7B%0A%20%20%20%20%20%20%20%20%2F*%0A%20%20%20%20%20%20%20%20*%20%E8%BF%99%E9%87%8C%E6%98%AF%E9%85%8D%E7%BD%AEToken%E8%8E%B7%E5%8F%96%E7%9A%84%E5%AE%89%E5%85%A8%E7%AD%96%E7%95%A5%0A%20%20%20%20%20%20%20%20*%20%E8%8E%B7%E5%8F%96Token%E7%9A%84%E6%8E%A5%E5%8F%A3%E5%AF%B9%E5%A4%96%E6%9A%B4%E9%9C%B2%EF%BC%8C%E4%B8%8D%E9%AA%8C%E8%AF%81%0A%20%20%20%20%20%20%20%20*%20%E5%85%B6%E5%AE%83%E6%8E%A5%E5%8F%A3%E9%9C%80%E8%A6%81%E9%AA%8C%E8%AF%81%E5%AE%89%E5%85%A8%0A%20%20%20%20%20%20%20%20*%20*%2F%0A%20%20%20%20%20%20%20%20oauthServer.tokenKeyAccess(%22permitAll()%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.checkTokenAccess(%22isAuthenticated()%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.allowFormAuthenticationForClients()%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.passwordEncoder(NoOpPasswordEncoder.getInstance())%3B%0A%20%20%20%20%7D%0A%0A%0A%20%20%20%20%40Autowired%0A%20%20%20%20%40Qualifier(%22authenticationManagerBean%22)%0A%20%20%20%20private%20AuthenticationManager%20authenticationManager%3B%0A%0A%20%20%20%20%40Bean%0A%20%20%20%20public%20TokenStore%20tokenStore()%20%7B%0A%20%20%20%20%20%20%20%20return%20new%20JwtTokenStore(jwtTokenEnhancer())%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%40Bean%0A%20%20%20%20protected%20JwtAccessTokenConverter%20jwtTokenEnhancer()%20%7B%0A%20%20%20%20%20%20%20%20%2F*%0A%20%20%20%20%20%20%20%20*%20%E8%AF%A5%E5%AF%B9%E8%B1%A1%E7%94%A8%E4%BA%8E%E5%AF%B9Token%E7%9A%84%E8%BD%AC%E6%8D%A2%EF%BC%8C%E4%BD%BF%E7%94%A8RSA%E9%9D%9E%E5%AF%B9%E7%A7%B0%E5%8A%A0%E5%AF%86%E7%AE%97%E6%B3%95%0A%20%20%20%20%20%20%20%20*%20*%2F%0A%20%20%20%20%20%20%20%20%2F*%0A%20%20%20%20%20%20%20%20*%20%E9%9C%80%E8%A6%81%E4%BD%BF%E7%94%A8jks%E6%96%87%E4%BB%B6%E4%BD%9C%E4%B8%BAToken%E7%9A%84%E5%8A%A0%E5%AF%86%E7%9A%84%E7%A7%98%E9%92%A5%0A%20%20%20%20%20%20%20%20*%20*%2F%0A%20%20%20%20%20%20%20%20KeyStoreKeyFactory%20keyStoreKeyFactory%20%3D%20new%20KeyStoreKeyFactory(new%20ClassPathResource(%22fzp-jwt.jks%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2C%20%22fzp123%22.toCharArray())%3B%0A%20%20%20%20%20%20%20%20JwtAccessTokenConverter%20converter%20%3D%20new%20JwtAccessTokenConverter()%3B%0A%20%20%20%20%20%20%20%20converter.setKeyPair(keyStoreKeyFactory.getKeyPair(%22fzp-jwt%22))%3B%0A%20%20%20%20%20%20%20%20return%20converter%3B%0A%20%20%20%20%7D%0A%7D%0A%0A%60%60%60%0A%0A%23%23%23%23%20%E7%94%9F%E6%88%90jks%E6%96%87%E4%BB%B6%0A%0A%E5%9C%A8%E9%85%8D%E7%BD%AE%E4%B8%AD%E9%9C%80%E8%A6%81jks%E6%96%87%E4%BB%B6%E4%BD%9C%E4%B8%BAToken%E7%9A%84%E5%8A%A0%E5%AF%86%E7%9A%84%E5%AF%86%E9%92%A5%0A%0A1.%20%E7%A1%AE%E4%BF%9D%E5%AE%89%E8%A3%85%E4%BA%86jdk%0A2.%20%E6%89%93%E5%BC%80%E7%BB%88%E7%AB%AF%EF%BC%8C%E8%BE%93%E5%85%A5%E5%A6%82%E4%B8%8B%0A%60%60%60%0Akeytool%20-genkeypair%20-alias%20ymy-jwt%20-validity%203650%20-keyalg%20RSA%20-dname%20%22CN%3Djwt%2COU%3Djtw%2CO%3Djtw%2CL%3Dzurich%2CS%3Dzurich%2CC%3DCH%22%20-keypass%20ymy123%20-keystore%20ymy-jwt.jks%20-storepass%20ymy123%0A%60%60%60%0A%E4%BC%9A%E5%87%BA%E7%8E%B0%E6%8A%A5%E9%94%99%EF%BC%8C%E8%AF%B4%E4%BD%BF%E7%94%A8%E5%A6%82%E4%B8%8B%E8%AF%AD%E5%8F%A5%E8%BF%9B%E8%A1%8C%60keytool%20-importkeystore%20-srckeystore%20ymy-jwt.jks%20-destkeystore%20ymy-jwt.jks%20-deststoretype%20pkcs12%60%0A%E7%84%B6%E5%90%8E%E8%A6%81%E6%B1%82%E8%BE%93%E5%85%A5%E6%BA%90%E7%A7%98%E9%92%A5%E5%BA%93%E5%8F%A3%E4%BB%A4%EF%BC%8C%E4%B9%9F%E5%B0%B1%E6%98%AF%E5%AF%B9%E5%BA%94%E7%9A%84%E5%AF%86%E7%A0%81%EF%BC%8C%E8%BF%99%E9%87%8C%E6%98%AFymy123%0A3.%20%60keytool%20-list%20-rfc%20--keystore%20ymy-jwt.jks%20%7C%20openssl%20x509%20-inform%20pem%20-pubkey%60%0A%E8%BF%99%E9%87%8C%E5%8F%AF%E8%83%BD%E4%BC%9A%E5%87%BA%E7%8E%B0%E6%89%BE%E4%B8%8D%E5%88%B0openssl%E5%91%BD%E4%BB%A4%EF%BC%8C%E5%85%B3%E4%BA%8E%E4%B8%8B%E8%BD%BD%E5%B9%B6%E9%85%8D%E7%BD%AEopenssl%EF%BC%8C%E8%AF%B7%E8%A7%81%E5%BA%95%E9%83%A8%0A!%5B8076624980a630a34515295fe8f45df6.png%5D(en-resource%3A%2F%2Fdatabase%2F2023%3A0)%0A%0A4.%20%E5%B0%86%E7%94%9F%E6%88%90%E7%9A%84%E5%85%AC%E9%92%A5%E4%BF%A1%E6%81%AF%E5%A4%8D%E5%88%B6%EF%BC%8C%E6%96%B0%E5%BB%BA%E4%B8%80%E4%B8%AA%60public.cert%60%E6%96%87%E4%BB%B6%EF%BC%8C%E5%A4%8D%E5%88%B6%E5%B9%B6%E4%BF%9D%E5%AD%98%0A%0A%0A%3Cbr%2F%3E%0A%3Cbr%2F%3E%0A%0A%E5%B0%86%E6%96%87%E4%BB%B6%E5%A4%8D%E5%88%B6%E5%88%B0Resource%E7%9B%AE%E5%BD%95%E4%B8%8B%EF%BC%8Cmaven%E7%BC%96%E8%AF%91%E7%9A%84%E6%97%B6%E5%80%99%EF%BC%8C%E5%8F%AF%E8%83%BD%E4%BC%9A%E5%B0%86jks%E6%96%87%E4%BB%B6%E7%BC%96%E8%AF%91%EF%BC%8C%E4%BB%8E%E8%80%8C%E4%BA%A7%E7%94%9F%E4%B9%B1%E7%A0%81%EF%BC%8C%E6%89%80%E4%BB%A5%E9%9C%80%E8%A6%81%E5%9C%A8pom%E4%B8%AD%E6%B7%BB%E5%8A%A0%E5%A6%82%E4%B8%8B%E4%BE%9D%E8%B5%96%E4%BF%A1%E6%81%AF%0A%60%60%60xml%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cplugin%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3CgroupId%3Eorg.apache.maven.plugins%3C%2FgroupId%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3CartifactId%3Emaven-resources-plugin%3C%2FartifactId%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cconfiguration%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3CnonFilteredFileExtensions%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3CnonFilteredFileExtension%3Ecert%3C%2FnonFilteredFileExtension%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3CnonFilteredFileExtension%3Ejks%3C%2FnonFilteredFileExtension%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%2FnonFilteredFileExtensions%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fconfiguration%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fplugin%3E%0A%60%60%60%0A%0A%23%23%23%202.4%20%E7%BC%96%E5%86%99user-service%E8%B5%84%E6%BA%90%E6%9C%8D%E5%8A%A1%0A%23%23%23%23%20%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE%EF%BC%8C%E6%B7%BB%E5%8A%A0%E4%BE%9D%E8%B5%96%0A%60%60%60xml%0A%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%3F%3E%0A%3Cproject%20xmlns%3D%22http%3A%2F%2Fmaven.apache.org%2FPOM%2F4.0.0%22%20xmlns%3Axsi%3D%22http%3A%2F%2Fwww.w3.org%2F2001%2FXMLSchema-instance%22%0A%20%20%20%20%20%20%20%20%20xsi%3AschemaLocation%3D%22http%3A%2F%2Fmaven.apache.org%2FPOM%2F4.0.0%20https%3A%2F%2Fmaven.apache.org%2Fxsd%2Fmaven-4.0.0.xsd%22%3E%0A%20%20%20%20%3CmodelVersion%3E4.0.0%3C%2FmodelVersion%3E%0A%20%20%20%20%3Cparent%3E%0A%20%20%20%20%20%20%20%20%3CartifactId%3Ejwt-demo1%3C%2FartifactId%3E%0A%20%20%20%20%20%20%20%20%3CgroupId%3Ecn.coderymy%3C%2FgroupId%3E%0A%20%20%20%20%20%20%20%20%3Cversion%3E1.0-SNAPSHOT%3C%2Fversion%3E%0A%20%20%20%20%3C%2Fparent%3E%0A%20%20%20%20%3CartifactId%3Euser-service%3C%2FartifactId%3E%0A%20%20%20%20%3Cversion%3E0.0.1-SNAPSHOT%3C%2Fversion%3E%0A%20%20%20%20%3Cname%3Euser-service%3C%2Fname%3E%0A%20%20%20%20%3Cdescription%3EDemo%20project%20for%20Spring%20Boot%3C%2Fdescription%3E%0A%0A%20%20%20%20%3Cproperties%3E%0A%20%20%20%20%20%20%20%20%3Cjava.version%3E1.8%3C%2Fjava.version%3E%0A%20%20%20%20%20%20%20%20%3Cspring-cloud.version%3EGreenwich.SR3%3C%2Fspring-cloud.version%3E%0A%20%20%20%20%3C%2Fproperties%3E%0A%0A%20%20%20%20%3Cdependencies%3E%0A%20%20%20%20%20%20%20%20%3Cdependency%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3CgroupId%3Eorg.springframework.boot%3C%2FgroupId%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3CartifactId%3Espring-boot-starter-web%3C%2FartifactId%3E%0A%20%20%20%20%20%20%20%20%3C%2Fdependency%3E%0A%20%20%20%20%20%20%20%20%3Cdependency%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3CgroupId%3Eorg.springframework.cloud%3C%2FgroupId%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3CartifactId%3Espring-cloud-starter-netflix-eureka-client%3C%2FartifactId%3E%0A%20%20%20%20%20%20%20%20%3C%2Fdependency%3E%0A%20%20%20%20%20%20%20%20%3Cdependency%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3CgroupId%3Eorg.springframework.cloud%3C%2FgroupId%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3CartifactId%3Espring-cloud-starter-netflix-hystrix%3C%2FartifactId%3E%0A%20%20%20%20%20%20%20%20%3C%2Fdependency%3E%0A%20%20%20%20%20%20%20%20%3Cdependency%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3CgroupId%3Eorg.springframework.cloud%3C%2FgroupId%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3CartifactId%3Espring-cloud-starter-openfeign%3C%2FartifactId%3E%0A%20%20%20%20%20%20%20%20%3C%2Fdependency%3E%0A%20%20%20%20%20%20%20%20%3Cdependency%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3CgroupId%3Eorg.springframework.security%3C%2FgroupId%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3CartifactId%3Espring-security-jwt%3C%2FartifactId%3E%0A%20%20%20%20%20%20%20%20%3C%2Fdependency%3E%0A%20%20%20%20%20%20%20%20%3Cdependency%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3CgroupId%3Eorg.springframework.security.oauth%3C%2FgroupId%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3CartifactId%3Espring-security-oauth2%3C%2FartifactId%3E%0A%20%20%20%20%20%20%20%20%3C%2Fdependency%3E%0A%20%20%20%20%20%20%20%20%3Cdependency%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3CgroupId%3Eorg.springframework.boot%3C%2FgroupId%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3CartifactId%3Espring-boot-starter-data-jpa%3C%2FartifactId%3E%0A%20%20%20%20%20%20%20%20%3C%2Fdependency%3E%0A%20%20%20%20%20%20%20%20%3Cdependency%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3CgroupId%3Emysql%3C%2FgroupId%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3CartifactId%3Emysql-connector-java%3C%2FartifactId%3E%0A%20%20%20%20%20%20%20%20%3C%2Fdependency%3E%0A%20%20%20%20%3C%2Fdependencies%3E%0A%0A%20%20%20%20%3CdependencyManagement%3E%0A%20%20%20%20%20%20%20%20%3Cdependencies%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdependency%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3CgroupId%3Eorg.springframework.cloud%3C%2FgroupId%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3CartifactId%3Espring-cloud-dependencies%3C%2FartifactId%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cversion%3E%24%7Bspring-cloud.version%7D%3C%2Fversion%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Ctype%3Epom%3C%2Ftype%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cscope%3Eimport%3C%2Fscope%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fdependency%3E%0A%20%20%20%20%20%20%20%20%3C%2Fdependencies%3E%0A%20%20%20%20%3C%2FdependencyManagement%3E%0A%0A%20%20%20%20%3Cbuild%3E%0A%20%20%20%20%20%20%20%20%3Cplugins%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cplugin%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3CgroupId%3Eorg.springframework.boot%3C%2FgroupId%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3CartifactId%3Espring-boot-maven-plugin%3C%2FartifactId%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fplugin%3E%0A%20%20%20%20%20%20%20%20%3C%2Fplugins%3E%0A%20%20%20%20%3C%2Fbuild%3E%0A%0A%3C%2Fproject%3E%0A%0A%0A%60%60%60%0A%23%23%23%23%20%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%0A%0A%60%60%60yaml%0Aserver%3A%0A%20%20port%3A%209090%0Aeureka%3A%0A%20%20client%3A%0A%20%20%20%20service-url%3A%20%0A%20%20%20%20%20%20defaultZone%3A%20http%3A%2F%2Flocalhost%3A8761%2Feureka%2F%0A%0Aspring%3A%0A%20%20application%3A%0A%20%20%20%20name%3A%20user-service%0A%20%20datasource%3A%0A%20%20%20%20driver-class-name%3A%20com.mysql.jdbc.Driver%0A%20%20%20%20url%3A%0A%20%20%20%20username%3A%0A%20%20%20%20password%3A%20%0A%20%20jpa%3A%0A%20%20%20%20hibernate%3A%0A%20%20%20%20%20%20ddl-auto%3A%20update%0A%20%20%20%20show-sql%3A%20true%0Afeign%3A%0A%20%20hystrix%3A%0A%20%20%20%20enabled%3A%20true%0A%0A%60%60%60%0A%23%23%23%23%20%E9%85%8D%E7%BD%AEResource%20Server%0A%E9%9C%80%E8%A6%81%E5%B0%86cert%E6%96%87%E4%BB%B6%E6%94%BE%E5%88%B0resources%E4%B8%8B%0A%60%60%60java%0A%40Configuration%0Apublic%20class%20JwtConfig%20%7B%0A%20%20%20%20%40Autowired%0A%20%20%20%20JwtAccessTokenConverter%20jwtAccessTokenConverter%3B%0A%0A%0A%20%20%20%20%40Bean%0A%20%20%20%20%40Qualifier(%22tokenStore%22)%0A%20%20%20%20public%20TokenStore%20tokenStore()%7B%0A%20%20%20%20%20%20%20%20return%20new%20JwtTokenStore(jwtAccessTokenConverter)%3B%0A%20%20%20%20%7D%0A%20%20%20%20%40Bean%0A%20%20%20%20protected%20JwtAccessTokenConverter%20jwtTokenConverter()%7B%0A%20%20%20%20%20%20%20%20JwtAccessTokenConverter%20converter%3Dnew%20JwtAccessTokenConverter()%3B%0A%20%20%20%20%20%20%20%20ClassPathResource%20resource%3Dnew%20ClassPathResource(%22public.cert%22)%3B%0A%20%20%20%20%20%20%20%20String%20publicKey%3B%0A%20%20%20%20%20%20%20%20try%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20publicKey%3Dnew%20String(FileCopyUtils.copyToByteArray(resource.getInputStream()))%3B%0A%20%20%20%20%20%20%20%20%7D%20catch%20(IOException%20e)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20throw%20new%20RuntimeException()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20converter.setVerifierKey(publicKey)%3B%0A%20%20%20%20%20%20%20%20return%20converter%3B%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%23%23%20%E9%85%8D%E7%BD%AEResourceServerConfig%0A%60%60%60java%0A%40Configuration%0A%40EnableResourceServer%0Apublic%20class%20ResourceServerConfig%20extends%20ResourceServerConfigurerAdapter%20%7B%0A%20%20%20%20%40Autowired%0A%20%20%20%20TokenStore%20tokenStore%3B%0A%0A%20%20%20%20%40Override%0A%20%20%20%20public%20void%20configure(HttpSecurity%20http)%20throws%20Exception%20%7B%0A%20%20%20%20%20%20%20%20http.csrf().disable()%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.authorizeRequests()%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.antMatchers(%22%2Fsuer%2Flogin%22%2C%22%2Fuser%2Fregister%22).permitAll()%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.antMatchers(%22%2F**%22).authenticated()%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%40Override%0A%20%20%20%20public%20void%20configure(ResourceServerSecurityConfigurer%20resources)%20throws%20Exception%20%7B%0A%20%20%20%20%20%20%20%20resources.tokenStore(tokenStore)%3B%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%0A%23%23%23%23%20%E9%85%8D%E7%BD%AE%E5%BC%80%E5%90%AF%E6%96%B9%E6%B3%95%E7%9A%84%E5%AE%89%E5%85%A8%E9%AA%8C%E8%AF%81%0A%60%60%60java%0A%40Configuration%0A%40EnableGlobalMethodSecurity(prePostEnabled%20%3D%20true)%0Apublic%20class%20GlobalMethodSecurityConfig%20%7B%0A%7D%0A%60%60%60%0A%0A%23%23%23%23%20%E7%BC%96%E5%86%99%E7%94%A8%E6%88%B7%E6%B3%A8%E5%86%8C%E6%8E%A5%E5%8F%A3%0A1.%20%E7%94%A8%E5%88%B0user%E5%92%8Crole%E4%B8%A4%E4%B8%AA%E5%AE%9E%E4%BD%93%E7%B1%BB%EF%BC%8Cuserdao%E7%BB%A7%E6%89%BFjpaRepository%E7%B1%BB%2B%0A%0A%0A%0A%0A%0A%0A%0A%0A%0A%23%20%E4%B8%8B%E8%BD%BD%E9%85%8D%E7%BD%AEopenssl%0A1.%20%E4%B8%8B%E8%BD%BD%5Bopenssl%E4%B8%8B%E8%BD%BD%E5%9C%B0%E5%9D%80%5D(%0Ahttp%3A%2F%2Fslproweb.com%2Fproducts%2FWin32OpenSSL.html)%0A2.%20%E9%85%8D%E7%BD%AE%EF%BC%8C%E5%AE%89%E8%A3%85%E5%AE%8C%E6%88%90%E4%B9%8B%E5%90%8E%EF%BC%8C%E5%B0%86%E5%AF%B9%E5%BA%94%E7%9A%84%E5%AE%89%E8%A3%85%E8%B7%AF%E5%BE%84%E7%9A%84bin%E9%85%8D%E7%BD%AE%E5%9C%A8%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E7%9A%84path%E4%B8%AD%E5%8D%B3%E5%8F%AF%0A3.%20%E9%AA%8C%E8%AF%81%E6%98%AF%E5%90%A6%E9%85%8D%E7%BD%AE%E6%88%90%E5%8A%9F%EF%BC%8C%E5%9C%A8%E5%91%BD%E4%BB%A4%E8%A1%8C%E4%B8%AD%E7%9B%B4%E6%8E%A5%E8%BE%93%E5%85%A5openssl</center></span>
</div></body></html> 