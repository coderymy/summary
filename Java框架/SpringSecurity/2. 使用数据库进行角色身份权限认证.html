<html>
<head>
  <title>Evernote Export</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/606746 (zh-CN, DDL); Windows/10.0.0 (Win64); EDAMVersion=V2;"/>
  <meta name="content-class" content="yinxiang.markdown"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="700"/>

<div><span><div style="font-size: 14px; margin: 0; padding: 0; width: 100%;"><h1 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 41px; border-bottom: 3px double #999; color: #000; margin-top: 14px;">2. 使用数据库进行角色身份权限认证</h1>
<h2 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 34px; border-bottom: 1px solid #dbdbdb; color: #333;">2.1 创建对应的表信息</h2>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">一般使用三张表就可以了</p>
<ol style="line-height: 160%; box-sizing: content-box; display: block; padding-left: 30px; margin: 6px 0 10px; color: #333; list-style-type: decimal;">
<li style="line-height: 160%; box-sizing: content-box;">user表</li>
</ol>
<table style="margin: 2px 0 14px; color: #333; width: auto; border-collapse: collapse; box-sizing: border-box;"><thead style="line-height: 160%; box-sizing: content-box;"><tr style="line-height: 160%; box-sizing: content-box;"><th style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #72777b; border-top: 0; background-color: #7b8184; font-weight: 300; color: #fff; padding-top: 6px;">字段名</th><th style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #72777b; border-top: 0; background-color: #7b8184; font-weight: 300; color: #fff; padding-top: 6px;">类型</th><th style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #72777b; border-top: 0; background-color: #7b8184; font-weight: 300; color: #fff; padding-top: 6px;">解释</th></tr></thead><tbody style="line-height: 160%; box-sizing: content-box;"><tr style="line-height: 160%; box-sizing: content-box;"><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">id</td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">int(11)</td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">主键id</td></tr><tr style="line-height: 160%; box-sizing: content-box;"><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">username</td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">varchar(32)</td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">用户名</td></tr><tr style="line-height: 160%; box-sizing: content-box;"><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">password</td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">varchar(255)</td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">经过加密的密码</td></tr><tr style="line-height: 160%; box-sizing: content-box;"><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">enabled</td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">tinyint(1)</td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">是否可用</td></tr><tr style="line-height: 160%; box-sizing: content-box;"><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">locked</td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">tinyint(1)</td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;"></td></tr></tbody></table>
<ol start="2" style="line-height: 160%; box-sizing: content-box; display: block; padding-left: 30px; margin: 6px 0 10px; color: #333; list-style-type: decimal;">
<li style="line-height: 160%; box-sizing: content-box;">role表</li>
</ol>
<table style="margin: 2px 0 14px; color: #333; width: auto; border-collapse: collapse; box-sizing: border-box;"><thead style="line-height: 160%; box-sizing: content-box;"><tr style="line-height: 160%; box-sizing: content-box;"><th style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #72777b; border-top: 0; background-color: #7b8184; font-weight: 300; color: #fff; padding-top: 6px;">字段名</th><th style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #72777b; border-top: 0; background-color: #7b8184; font-weight: 300; color: #fff; padding-top: 6px;">类型</th><th style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #72777b; border-top: 0; background-color: #7b8184; font-weight: 300; color: #fff; padding-top: 6px;">解释</th></tr></thead><tbody style="line-height: 160%; box-sizing: content-box;"><tr style="line-height: 160%; box-sizing: content-box;"><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">id</td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">int(11)</td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;"></td></tr><tr style="line-height: 160%; box-sizing: content-box;"><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">name</td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">varchar(32)</td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;"></td></tr><tr style="line-height: 160%; box-sizing: content-box;"><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">nameZh</td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">varchar(32)</td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;"></td></tr></tbody></table>
<ol start="3" style="line-height: 160%; box-sizing: content-box; display: block; padding-left: 30px; margin: 6px 0 10px; color: #333; list-style-type: decimal;">
<li style="line-height: 160%; box-sizing: content-box;">user_role表</li>
</ol>
<table style="margin: 2px 0 14px; color: #333; width: auto; border-collapse: collapse; box-sizing: border-box;"><thead style="line-height: 160%; box-sizing: content-box;"><tr style="line-height: 160%; box-sizing: content-box;"><th style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #72777b; border-top: 0; background-color: #7b8184; font-weight: 300; color: #fff; padding-top: 6px;">字段名</th><th style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #72777b; border-top: 0; background-color: #7b8184; font-weight: 300; color: #fff; padding-top: 6px;">类型</th><th style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #72777b; border-top: 0; background-color: #7b8184; font-weight: 300; color: #fff; padding-top: 6px;">解释</th></tr></thead><tbody style="line-height: 160%; box-sizing: content-box;"><tr style="line-height: 160%; box-sizing: content-box;"><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">id</td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">int(11)</td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;"></td></tr><tr style="line-height: 160%; box-sizing: content-box;"><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">uid</td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">int(11)</td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;"></td></tr><tr style="line-height: 160%; box-sizing: content-box;"><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">rid</td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">int(11)</td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;"></td></tr></tbody></table>
<h2 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 34px; border-bottom: 1px solid #dbdbdb; color: #333;">2.2 创建项目，添加依赖</h2>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;">        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependency</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>org.springframework.boot<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>spring-boot-starter-security<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependency</span>&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependency</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>org.springframework.boot<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>spring-boot-starter-web<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependency</span>&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependency</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>org.mybatis.spring.boot<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>mybatis-spring-boot-starter<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">version</span>&gt;</span>2.1.0<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">version</span>&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependency</span>&gt;</span>

        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependency</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>mysql<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>mysql-connector-java<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">scope</span>&gt;</span>runtime<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">scope</span>&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependency</span>&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependency</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>org.springframework.boot<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>spring-boot-starter-test<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">scope</span>&gt;</span>test<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">scope</span>&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependency</span>&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependency</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>org.springframework.security<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>spring-security-test<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">scope</span>&gt;</span>test<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">scope</span>&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependency</span>&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependency</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>com.alibaba<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>druid<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">version</span>&gt;</span>1.1.10<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">version</span>&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependency</span>&gt;</span>
</code></pre>
<h2 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 34px; border-bottom: 1px solid #dbdbdb; color: #333;">2.3 创建对应的po类和dao类</h2>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">user类需要<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">实现UserDetail接口</strong><br/>
还要注意的一点就是，user类中需要有对应的roles信息，也就是可以直接将对应的权限信息放到user对象中</p>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;">    <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">private</span> List&lt;Role&gt; roles;<span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">//get、set方法</span>
    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">@Override</span>
    <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">public</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">boolean</span> <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">isAccountNonExpired</span><span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">()</span> </span>{
        <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">return</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">true</span>;<span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">//账户是否过期</span>
    }

    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">@Override</span>
    <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">public</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">boolean</span> <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">isAccountNonLocked</span><span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">()</span> </span>{
        <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">return</span> !locked;<span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">//账户是否锁定</span>
    }

    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">@Override</span>
    <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">public</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">boolean</span> <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">isCredentialsNonExpired</span><span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">()</span> </span>{
        <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">return</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">true</span>;<span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">//账号密码是否过期</span>
    }

    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">@Override</span>
    <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">public</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">boolean</span> <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">isEnabled</span><span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">()</span> </span>{
        <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">return</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">true</span>;<span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">//当前账户是否可用</span>
    }
</code></pre>
<h2 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 34px; border-bottom: 1px solid #dbdbdb; color: #333;">2.4 创建对应的service类</h2>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">创建一个<code style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; color: #c1788b; padding: 4px 4px 2px 0; letter-spacing: -.3px;">UserService</code>实现<code style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; color: #c1788b; padding: 4px 4px 2px 0; letter-spacing: -.3px;">UserDetailsService</code>接口<br/>
在实现的方法<code style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; color: #c1788b; padding: 4px 4px 2px 0; letter-spacing: -.3px;">loadUserByUsername</code>中添加上赋权的代码。也就是从数据库中查询出来对应的权限，将权限复制给这个user对选哪个</p>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;"><span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">1</span>. 创建一个User对象
<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">2</span>. 使用username查询出来这个对象
<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">3</span>. 使用这个对象查询出来对应的权限，并使用user.setRoles()方法将对应的权限放到user中
<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">4</span>. 最后返回这个user对象
</code></pre>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">在用户登录的时候自动回执行这个方法</p>
<h2 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 34px; border-bottom: 1px solid #dbdbdb; color: #333;">2.5 配置SpringSecurity</h2>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;"><span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">@Configuration</span>
<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">public</span> <span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">class</span> <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">WebSecurityConfig</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">extends</span> <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">WebSecurityConfigurerAdapter</span> </span>{
    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">@Autowired</span>
    <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">private</span> UserService userService;
    <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">PasswordEncoder <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">passwordEncoder</span><span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">()</span></span>{
        <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">return</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">new</span> BCryptPasswordEncoder();
    }
    <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">//认证</span>
    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">@Override</span>
    <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">protected</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">void</span> <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">configure</span><span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">(AuthenticationManagerBuilder auth)</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">throws</span> Exception </span>{
        auth.userDetailsService(userService);
    }
<span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">//授权</span>
    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">@Override</span>
    <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">protected</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">void</span> <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">configure</span><span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">(HttpSecurity http)</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">throws</span> Exception </span>{
        http.authorizeRequests()
                .antMatchers(<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;/admin/**&quot;</span>).hasRole(<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;admin&quot;</span>)
                .antMatchers(<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;/db/**&quot;</span>).access(<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;hasAnyRole('admin','user')&quot;</span>)<span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">//表示必须有admin或者user权限</span>
                .antMatchers(<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;/xxx/**&quot;</span>).access(<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;hasRole('xxx') and hasRole('yyy')&quot;</span>)<span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">//表示必须有xxx和yyy权限</span>
                .anyRequest().authenticated()<span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">//表示除了上面的权限之外，所有访问都需要登录才能访问</span>
                .and().formLogin().loginProcessingUrl(<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;/login&quot;</span>).permitAll()<span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">//开启login表单登录，也就是可以根据对饮的配置的url访问对应的登录</span>
                .and().csrf().disable();<span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">//关闭csrf</span>

    }
}

</code></pre>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">将userService对象放到configure中进行认证，会自动执行</p>
</div><center style="display:none !important;visibility:collapse !important;height:0 !important;white-space:nowrap;width:100%;overflow:hidden">%23%202.%20%E4%BD%BF%E7%94%A8%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9B%E8%A1%8C%E8%A7%92%E8%89%B2%E8%BA%AB%E4%BB%BD%E6%9D%83%E9%99%90%E8%AE%A4%E8%AF%81%0A%0A%23%23%202.1%20%E5%88%9B%E5%BB%BA%E5%AF%B9%E5%BA%94%E7%9A%84%E8%A1%A8%E4%BF%A1%E6%81%AF%0A%E4%B8%80%E8%88%AC%E4%BD%BF%E7%94%A8%E4%B8%89%E5%BC%A0%E8%A1%A8%E5%B0%B1%E5%8F%AF%E4%BB%A5%E4%BA%86%0A1.%20user%E8%A1%A8%0A%0A%7C%E5%AD%97%E6%AE%B5%E5%90%8D%7C%E7%B1%BB%E5%9E%8B%7C%E8%A7%A3%E9%87%8A%7C%0A%7C--%7C--%7C--%7C%0A%7Cid%7Cint(11)%7C%E4%B8%BB%E9%94%AEid%7C%0A%7Cusername%7Cvarchar(32)%7C%E7%94%A8%E6%88%B7%E5%90%8D%7C%0A%7Cpassword%7Cvarchar(255)%7C%E7%BB%8F%E8%BF%87%E5%8A%A0%E5%AF%86%E7%9A%84%E5%AF%86%E7%A0%81%7C%0A%7Cenabled%7Ctinyint(1)%7C%E6%98%AF%E5%90%A6%E5%8F%AF%E7%94%A8%7C%0A%7Clocked%7Ctinyint(1)%7C%7C%0A%0A2.%20role%E8%A1%A8%0A%0A%7C%E5%AD%97%E6%AE%B5%E5%90%8D%7C%E7%B1%BB%E5%9E%8B%7C%E8%A7%A3%E9%87%8A%7C%0A%7C--%7C--%7C--%7C%0A%7Cid%7Cint(11)%7C%7C%0A%7Cname%7Cvarchar(32)%7C%7C%0A%7CnameZh%7Cvarchar(32)%7C%7C%0A%0A3.%20user_role%E8%A1%A8%0A%0A%7C%E5%AD%97%E6%AE%B5%E5%90%8D%7C%E7%B1%BB%E5%9E%8B%7C%E8%A7%A3%E9%87%8A%7C%0A%7C--%7C--%7C--%7C%0A%7Cid%7Cint(11)%7C%7C%0A%7Cuid%7Cint(11)%7C%7C%0A%7Crid%7Cint(11)%7C%7C%0A%0A%0A%23%23%202.2%20%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE%EF%BC%8C%E6%B7%BB%E5%8A%A0%E4%BE%9D%E8%B5%96%0A%60%60%60xml%0A%20%20%20%20%20%20%20%20%3Cdependency%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3CgroupId%3Eorg.springframework.boot%3C%2FgroupId%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3CartifactId%3Espring-boot-starter-security%3C%2FartifactId%3E%0A%20%20%20%20%20%20%20%20%3C%2Fdependency%3E%0A%20%20%20%20%20%20%20%20%3Cdependency%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3CgroupId%3Eorg.springframework.boot%3C%2FgroupId%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3CartifactId%3Espring-boot-starter-web%3C%2FartifactId%3E%0A%20%20%20%20%20%20%20%20%3C%2Fdependency%3E%0A%20%20%20%20%20%20%20%20%3Cdependency%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3CgroupId%3Eorg.mybatis.spring.boot%3C%2FgroupId%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3CartifactId%3Emybatis-spring-boot-starter%3C%2FartifactId%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cversion%3E2.1.0%3C%2Fversion%3E%0A%20%20%20%20%20%20%20%20%3C%2Fdependency%3E%0A%0A%20%20%20%20%20%20%20%20%3Cdependency%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3CgroupId%3Emysql%3C%2FgroupId%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3CartifactId%3Emysql-connector-java%3C%2FartifactId%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cscope%3Eruntime%3C%2Fscope%3E%0A%20%20%20%20%20%20%20%20%3C%2Fdependency%3E%0A%20%20%20%20%20%20%20%20%3Cdependency%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3CgroupId%3Eorg.springframework.boot%3C%2FgroupId%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3CartifactId%3Espring-boot-starter-test%3C%2FartifactId%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cscope%3Etest%3C%2Fscope%3E%0A%20%20%20%20%20%20%20%20%3C%2Fdependency%3E%0A%20%20%20%20%20%20%20%20%3Cdependency%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3CgroupId%3Eorg.springframework.security%3C%2FgroupId%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3CartifactId%3Espring-security-test%3C%2FartifactId%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cscope%3Etest%3C%2Fscope%3E%0A%20%20%20%20%20%20%20%20%3C%2Fdependency%3E%0A%20%20%20%20%20%20%20%20%3Cdependency%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3CgroupId%3Ecom.alibaba%3C%2FgroupId%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3CartifactId%3Edruid%3C%2FartifactId%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cversion%3E1.1.10%3C%2Fversion%3E%0A%20%20%20%20%20%20%20%20%3C%2Fdependency%3E%0A%60%60%60%0A%0A%23%23%202.3%20%E5%88%9B%E5%BB%BA%E5%AF%B9%E5%BA%94%E7%9A%84po%E7%B1%BB%E5%92%8Cdao%E7%B1%BB%0Auser%E7%B1%BB%E9%9C%80%E8%A6%81**%E5%AE%9E%E7%8E%B0UserDetail%E6%8E%A5%E5%8F%A3**%0A%E8%BF%98%E8%A6%81%E6%B3%A8%E6%84%8F%E7%9A%84%E4%B8%80%E7%82%B9%E5%B0%B1%E6%98%AF%EF%BC%8Cuser%E7%B1%BB%E4%B8%AD%E9%9C%80%E8%A6%81%E6%9C%89%E5%AF%B9%E5%BA%94%E7%9A%84roles%E4%BF%A1%E6%81%AF%EF%BC%8C%E4%B9%9F%E5%B0%B1%E6%98%AF%E5%8F%AF%E4%BB%A5%E7%9B%B4%E6%8E%A5%E5%B0%86%E5%AF%B9%E5%BA%94%E7%9A%84%E6%9D%83%E9%99%90%E4%BF%A1%E6%81%AF%E6%94%BE%E5%88%B0user%E5%AF%B9%E8%B1%A1%E4%B8%AD%0A%60%60%60java%20%0A%20%20%20%20private%20List%3CRole%3E%20roles%3B%2F%2Fget%E3%80%81set%E6%96%B9%E6%B3%95%0A%20%20%20%20%40Override%0A%20%20%20%20public%20boolean%20isAccountNonExpired()%20%7B%0A%20%20%20%20%20%20%20%20return%20true%3B%2F%2F%E8%B4%A6%E6%88%B7%E6%98%AF%E5%90%A6%E8%BF%87%E6%9C%9F%0A%20%20%20%20%7D%0A%0A%20%20%20%20%40Override%0A%20%20%20%20public%20boolean%20isAccountNonLocked()%20%7B%0A%20%20%20%20%20%20%20%20return%20!locked%3B%2F%2F%E8%B4%A6%E6%88%B7%E6%98%AF%E5%90%A6%E9%94%81%E5%AE%9A%0A%20%20%20%20%7D%0A%0A%20%20%20%20%40Override%0A%20%20%20%20public%20boolean%20isCredentialsNonExpired()%20%7B%0A%20%20%20%20%20%20%20%20return%20true%3B%2F%2F%E8%B4%A6%E5%8F%B7%E5%AF%86%E7%A0%81%E6%98%AF%E5%90%A6%E8%BF%87%E6%9C%9F%0A%20%20%20%20%7D%0A%0A%20%20%20%20%40Override%0A%20%20%20%20public%20boolean%20isEnabled()%20%7B%0A%20%20%20%20%20%20%20%20return%20true%3B%2F%2F%E5%BD%93%E5%89%8D%E8%B4%A6%E6%88%B7%E6%98%AF%E5%90%A6%E5%8F%AF%E7%94%A8%0A%20%20%20%20%7D%0A%60%60%60%0A%23%23%202.4%20%E5%88%9B%E5%BB%BA%E5%AF%B9%E5%BA%94%E7%9A%84service%E7%B1%BB%0A%0A%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%60UserService%60%E5%AE%9E%E7%8E%B0%60UserDetailsService%60%E6%8E%A5%E5%8F%A3%0A%E5%9C%A8%E5%AE%9E%E7%8E%B0%E7%9A%84%E6%96%B9%E6%B3%95%60loadUserByUsername%60%E4%B8%AD%E6%B7%BB%E5%8A%A0%E4%B8%8A%E8%B5%8B%E6%9D%83%E7%9A%84%E4%BB%A3%E7%A0%81%E3%80%82%E4%B9%9F%E5%B0%B1%E6%98%AF%E4%BB%8E%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%AD%E6%9F%A5%E8%AF%A2%E5%87%BA%E6%9D%A5%E5%AF%B9%E5%BA%94%E7%9A%84%E6%9D%83%E9%99%90%EF%BC%8C%E5%B0%86%E6%9D%83%E9%99%90%E5%A4%8D%E5%88%B6%E7%BB%99%E8%BF%99%E4%B8%AAuser%E5%AF%B9%E9%80%89%E5%93%AA%E4%B8%AA%0A%60%60%60java%0A1.%20%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AAUser%E5%AF%B9%E8%B1%A1%0A2.%20%E4%BD%BF%E7%94%A8username%E6%9F%A5%E8%AF%A2%E5%87%BA%E6%9D%A5%E8%BF%99%E4%B8%AA%E5%AF%B9%E8%B1%A1%0A3.%20%E4%BD%BF%E7%94%A8%E8%BF%99%E4%B8%AA%E5%AF%B9%E8%B1%A1%E6%9F%A5%E8%AF%A2%E5%87%BA%E6%9D%A5%E5%AF%B9%E5%BA%94%E7%9A%84%E6%9D%83%E9%99%90%EF%BC%8C%E5%B9%B6%E4%BD%BF%E7%94%A8user.setRoles()%E6%96%B9%E6%B3%95%E5%B0%86%E5%AF%B9%E5%BA%94%E7%9A%84%E6%9D%83%E9%99%90%E6%94%BE%E5%88%B0user%E4%B8%AD%0A4.%20%E6%9C%80%E5%90%8E%E8%BF%94%E5%9B%9E%E8%BF%99%E4%B8%AAuser%E5%AF%B9%E8%B1%A1%0A%60%60%60%0A%E5%9C%A8%E7%94%A8%E6%88%B7%E7%99%BB%E5%BD%95%E7%9A%84%E6%97%B6%E5%80%99%E8%87%AA%E5%8A%A8%E5%9B%9E%E6%89%A7%E8%A1%8C%E8%BF%99%E4%B8%AA%E6%96%B9%E6%B3%95%0A%0A%23%23%202.5%20%E9%85%8D%E7%BD%AESpringSecurity%0A%0A%60%60%60java%0A%40Configuration%0Apublic%20class%20WebSecurityConfig%20extends%20WebSecurityConfigurerAdapter%20%7B%0A%20%20%20%20%40Autowired%0A%20%20%20%20private%20UserService%20userService%3B%0A%20%20%20%20PasswordEncoder%20passwordEncoder()%7B%0A%20%20%20%20%20%20%20%20return%20new%20BCryptPasswordEncoder()%3B%0A%20%20%20%20%7D%0A%20%20%20%20%2F%2F%E8%AE%A4%E8%AF%81%0A%20%20%20%20%40Override%0A%20%20%20%20protected%20void%20configure(AuthenticationManagerBuilder%20auth)%20throws%20Exception%20%7B%0A%20%20%20%20%20%20%20%20auth.userDetailsService(userService)%3B%0A%20%20%20%20%7D%0A%2F%2F%E6%8E%88%E6%9D%83%0A%20%20%20%20%40Override%0A%20%20%20%20protected%20void%20configure(HttpSecurity%20http)%20throws%20Exception%20%7B%0A%20%20%20%20%20%20%20%20http.authorizeRequests()%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.antMatchers(%22%2Fadmin%2F**%22).hasRole(%22admin%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.antMatchers(%22%2Fdb%2F**%22).access(%22hasAnyRole('admin'%2C'user')%22)%2F%2F%E8%A1%A8%E7%A4%BA%E5%BF%85%E9%A1%BB%E6%9C%89admin%E6%88%96%E8%80%85user%E6%9D%83%E9%99%90%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.antMatchers(%22%2Fxxx%2F**%22).access(%22hasRole('xxx')%20and%20hasRole('yyy')%22)%2F%2F%E8%A1%A8%E7%A4%BA%E5%BF%85%E9%A1%BB%E6%9C%89xxx%E5%92%8Cyyy%E6%9D%83%E9%99%90%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.anyRequest().authenticated()%2F%2F%E8%A1%A8%E7%A4%BA%E9%99%A4%E4%BA%86%E4%B8%8A%E9%9D%A2%E7%9A%84%E6%9D%83%E9%99%90%E4%B9%8B%E5%A4%96%EF%BC%8C%E6%89%80%E6%9C%89%E8%AE%BF%E9%97%AE%E9%83%BD%E9%9C%80%E8%A6%81%E7%99%BB%E5%BD%95%E6%89%8D%E8%83%BD%E8%AE%BF%E9%97%AE%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.and().formLogin().loginProcessingUrl(%22%2Flogin%22).permitAll()%2F%2F%E5%BC%80%E5%90%AFlogin%E8%A1%A8%E5%8D%95%E7%99%BB%E5%BD%95%EF%BC%8C%E4%B9%9F%E5%B0%B1%E6%98%AF%E5%8F%AF%E4%BB%A5%E6%A0%B9%E6%8D%AE%E5%AF%B9%E9%A5%AE%E7%9A%84%E9%85%8D%E7%BD%AE%E7%9A%84url%E8%AE%BF%E9%97%AE%E5%AF%B9%E5%BA%94%E7%9A%84%E7%99%BB%E5%BD%95%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.and().csrf().disable()%3B%2F%2F%E5%85%B3%E9%97%ADcsrf%0A%0A%20%20%20%20%7D%0A%7D%0A%0A%60%60%60%0A%E5%B0%86userService%E5%AF%B9%E8%B1%A1%E6%94%BE%E5%88%B0configure%E4%B8%AD%E8%BF%9B%E8%A1%8C%E8%AE%A4%E8%AF%81%EF%BC%8C%E4%BC%9A%E8%87%AA%E5%8A%A8%E6%89%A7%E8%A1%8C%0A</center></span>
</div></body></html> 