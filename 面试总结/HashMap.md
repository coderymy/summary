# 问题

## HashMap和HashTable

hashMap线程不安全、hashTable线程安全

hashmap效率高，hashTable效率低一些

hashTable没有红黑树结构，且初始数组大小为11。且扩容为2倍加1



## 头插法和尾插法

不使用头插法的原因：

多线程情况下，A正在插入节点a。但是B也要插入触发了扩容。扩容的时候遍历节点。本来没问题的但是遍历到了a按照原理应该遍历在后面的就要插入到前面，所以就会形成环状结构。也就是a指向的是第一个位置。

## put步骤

1、对key进行hashCode，获取到hash值之后，将hash值右移16位再与原本的hashcode进行异或处理。

2、是否需要初始化/数组是否已满需要扩容

3、使用hashcode对数组长度进行取模定位到下标。期间需要比对key是否相同。如果相同就替换val

4、是否该槽位已经有值，如果有就将其链接在槽位的链表上，链接之后判断链表是否超过8如果超过8就转换成红黑树。